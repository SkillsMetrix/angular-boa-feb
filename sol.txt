import { Injectable } from '@angular/core';
import { CanActivate } from '@angular/router';

@Injectable({
  providedIn: 'root',
})
export class GuardService implements CanActivate {
  isAllowed = false;
  canActivate() {
    if (!this.isAllowed) {
      alert('Unauthorized Access...!');
    } else {
      this.isAllowed = true;
    }

    return this.isAllowed;
  }
}
-------



import { HttpClient } from '@angular/common/http';
import { Injectable } from '@angular/core';
import { GuardService } from './guard.service';

@Injectable({
  providedIn: 'root'
})
export class FormService {

  private apiURL='http://localhost:3000/users'

  constructor(private http:HttpClient,private gs:GuardService) { }

  addUserToDB(data:any){
   this.http.post(this.apiURL,data).subscribe(data =>{
    console.log("user added");
    
   })
    
  }
  loginValidate(data:any){
    this.gs.isAllowed=true
    return this.http.get<any[]>(
      `${this.apiURL}?uname=${data.uname}&pass=${data.pass}`

    )
  }
  loadUsers(){
    return this.http.get(this.apiURL) 
  }
  deleteUser(id:string){
    return this.http.delete(`${this.apiURL}/${id}`)
  }
}
